<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>vAttention: Dynamic Memory Management for Serving LLMs without PagedAttention - Efficient Paper</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.css" rel="stylesheet" />
        <link href="../../../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "vAttention: Dynamic Memory Management for Serving LLMs without PagedAttention";
        var mkdocs_page_input_path = "notes/2025/vAttention/note.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
 <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> Efficient Paper
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Paper List</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../cls_year/">By Year</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../cls_keyword/">By Keyword</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../cls_publication/">By Publication</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../cls_institution/">By Institution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../cls_author/">By Author</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Weekly Paper</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../weekly_paper/2025-07-25/">2025-07-25</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../weekly_paper/2025-08-01/">2025-08-01</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../weekly_paper/2025-08-08/">2025-08-08</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../weekly_paper/2025-08-15/">2025-08-15</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../weekly_paper/2025-08-22/">2025-08-22</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">Efficient Paper</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">vAttention: Dynamic Memory Management for Serving LLMs without PagedAttention</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
  
                <h1 id="vattention-dynamic-memory-management-for-serving-llms-without-pagedattention">vAttention: Dynamic Memory Management for Serving LLMs without PagedAttention</h1>
<p><a class="glightbox" href="../fig5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../fig5.png" /></a></p>
<h2 id="abstract">Abstract</h2>
<p>PagedAttention is a popular approach for dynamic memory allocation in LLM
serving systems. It enables on-demand allocation of GPU memory to mitigate KV
cache fragmentation -- a phenomenon that crippled the batch size (and
consequently throughput) in prior systems. However, in trying to allocate
physical memory at runtime, PagedAttention ends up changing the virtual memory
layout of the KV cache from contiguous to non-contiguous. Such a design leads
to non-trivial programming and performance overheads.
  We present vAttention -- an approach that mitigates fragmentation in physical
memory while retaining the contiguity of KV cache in virtual memory. We achieve
this by decoupling the allocation of virtual and physical memory using CUDA
virtual memory management APIs. We also introduce various LLM-specific
optimizations to address the limitations of CUDA virtual memory support.
Overall, vAttention is a simpler, portable, and performant alternative to
PagedAttention: it supports various attention kernels out-of-the-box and
improves LLM serving throughput by up to 1.23x compared to the use of
PagedAttention-based kernels of FlashAttention and FlashInfer.</p>
<p>Paged Attentionçš„æ”¹è¿›</p>
<p>Paged Attentionçš„ç¼ºç‚¹
- Requires Re-writing the Attention Kernel
  - KV Cacheä¸æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œéœ€è¦é‡å†™kernel
- Adds Redundancy in the Serving Framework
  - åœ¨runtimeæ—¶ï¼Œéœ€è¦åŒæ—¶è®¿é—®å¤šä¸ªå—çš„kv cacheï¼Œä½†æ˜¯å±äºvirtual memoryçš„ä¸åŒåœ°å€ã€‚Virtual Memoryå®é™…ä¸Šé€šè¿‡æ“ä½œç³»ç»Ÿæ‰¾åˆ°Physical Memoryæœ‰ä¸€ä¸ªç›¸ä¼¼çš„æ“ä½œã€‚
- Performance Overhead
  - Runtime overhead on the GPU
    - å¤šäº†ä¸€äº›è¿ç®—é€»è¾‘ï¼Œå¯¼è‡´GPUä¸Šæœ‰é¢å¤–çš„æ—¶é—´å¼€é”€
  - Runtime overhead on the CPU</p>
<p>vAttention å‘ç°ä¸¤ä¸ªç°è±¡
- KV cache memory requirement is predictable on a per-iteration basis.
  - åœ¨decodingæ—¶ï¼Œæ¯æ¬¡å¢é•¿çš„memoryæ˜¯å¯ä»¥æå‰é¢„æµ‹çš„
- KV cache does not require high memory allocation bandwidth.
  - ç»Ÿè®¡å‘ç°KV Cacheéœ€è¦Memoryæœ€é«˜åªæœ‰750MB/s</p>
<p><strong>åœ¨ç³»ç»Ÿå±‚é¢è¿›è¡Œåˆ†é¡µï¼Œä¿è¯åœ¨virtual memoryä¸Šæ˜¯è¿ç»­çš„ï¼Œè€Œä¸æ˜¯PagedAttentionåœ¨ç”¨æˆ·ç©ºé—´ä¸­åœ¨Virtual Memoryä¸Šè¿›è¡Œåˆ†é¡µã€‚</strong></p>
              
  <!-- Giscusåªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ˜¾ç¤ºï¼Œæœ¬åœ°å¼€å‘æ—¶éšè— -->

<div style="padding: 20px; background-color: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; margin: 20px 0;">
    <p><strong>ğŸ“ è¯„è®ºåŠŸèƒ½</strong></p>
    <p>è¯„è®ºåŠŸèƒ½ä»…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ã€‚åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼ŒGiscus æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p>
    <p>è¯·è®¿é—®çº¿ä¸Šç‰ˆæœ¬æŸ¥çœ‹å®Œæ•´çš„è¯„è®ºåŠŸèƒ½ã€‚</p>
</div>


            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
      <script src="../../../../js/prism-prototxt.js"></script>
      <script src="../../../../js/preview.js"></script>
      <script src="../../../../js/back-to-top.js"></script>
      <script src="https://giscus.app/client.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body>
</html>
